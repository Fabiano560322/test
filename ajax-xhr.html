<!DOCTYPE HTML>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta carset="utf-8" />
        <title>JavaScript:AJAX 網路連線實務</title>
    </head>
    <body>
        <h3>AJAX/XHR 網路連線實務</h3>
        <button style="cursor:pointer; background-color:#0f0; border-radius:5px;" onclick="getData();">連線取得資料</button> 
        <div id="result"></div>
        <script>
            //button style="cursor:pointer;" 是把指到按鈕的箭頭游標變成手指游標 
            /* 測試用的連線網址:
               https://cwpeng.github.io/live-records-samples/data/products.json
            */
            function getData(){
                //利用fetch進行連線並取得資料
                fetch("https://cwpeng.github.io/live-records-samples/data/products.json").then(function(response){
                    return response.json();
                }).then(function(data){
                    console.log(data);
                    //已取得資料, 把它呈現在畫面上
                    let result=document.querySelector("#result");
                    result.innerHTML=""; //把畫面先清空
                    for (let i=0; i<data.length; i++){
                         result.innerHTML+="<div>"+data[i].name+","+data[i].price+","+data[i].description+"</div>";
                         // 或寫成 let product=data[i];
                         //        result.innerHTML+="<div>"+product.name+","+product.price+","+product.description+"</div>";
                    }     
                });
            }
            //以下是另主題的練習
            let cal=(max)=>(max++*max/2);//箭頭函式簡化寫法
            cal(20);
            console.log(cal(20));
            //以下是物件解構賦值的練習
            function add({n1, n2}){
                console.log(n1-n2);
             };    
            add({n1:3+2, n2:2-2*9});            
            add({n2:2, n1:9}); 
            //以下是物件解構賦值+"其餘..."運算符號的練習
            let obj={x:3, y:4, z:5};
            let {x,...data}=obj; //data={y:4, z:5}
            console.log(data);
            let {y,...data1}=obj; //data1={x:3, z:5}
            console.log(data1);

            function test(a,b,...data2){
                console.log(a,b); //1 2
                console.log(data2); //[3,4,5]
            }
            
            function test1(a,b,...data2){
                console.log(a,b); //0 2
                console.log(data2); //[]          
            }
            test1(0,2);
            test(1,2,3,4,5);
            // 以下是一個加法器
            function add(n1,n2,...data2){
                console.log(n1,n2,data2);
                let total=n1+n2;
                for (let i=0; i<data2.length; i++) {
                    total+=data2[i];
                }
                console.log(total);
            }
            add(5,-1);
            add(5,-1,7,6,8);
        </script>
    </body>
</html>
